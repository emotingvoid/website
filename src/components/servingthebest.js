import React, { useState, useEffect } from 'react';
import { SlArrowRightCircle, SlArrowLeftCircle } from 'react-icons/sl';
import { useSwipeable } from 'react-swipeable';

import { Arya } from "next/font/google";
import {Anek_Gurmukhi} from "next/font/google";

const arya = Arya({ subsets: ['latin'], weight: ["400", "700"] });
const anek = Anek_Gurmukhi({ subsets: ['latin'], weight: ["400", "700"] })

const items = [
    // { text: 'Site Execution' },
    { text: 'Space Planning' },
    { text: 'Renovation' },
    { text: '3D visualization' },
    { text: 'Bedroom Design' },
    { text: 'Kitchen Design' },
    { text: 'Office Design' },
    { text: 'Retail Design' },
];

export const ServingBest = ({ isMobile }) => {
const [currentIndex, setCurrentIndex] = useState(1);

const nextItem = () => {
    setCurrentIndex((prevIndex) => (prevIndex + 1) % items.length);
};

const prevItem = () => {
    setCurrentIndex((prevIndex) => (prevIndex - 1 + items.length) % items.length);
};

const getClassName = (index) => {
    if (index === currentIndex) {
    return 'current';
    } else if (index === (currentIndex + 1) % items.length) {
    return 'next';
    } else if (index === (currentIndex - 1 + items.length) % items.length) {
    return 'prev';
    } else {
    return 'card-hidden';
    }
};

const handlers = useSwipeable({
    onSwipedLeft: nextItem,
    onSwipedRight: prevItem,
    preventDefaultTouchmoveEvent: true,
    trackMouse: true,
});
    
return (
    <div className="relative h-[50vh] md:h-screen bg-[rgb(188,161,132)] flex flex-col items-center justify-center text-center text-[#33383D] w-80%" id="services">
    <div className="mb-10 w-[53vw]">
        <svg className="hidden md:block w-full h-auto" viewBox="0 0 1090 52" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M50.6886 1.09L41.3086 44H34.9386L25.7686 8.86L16.8786 44H10.0886L0.778594 1.09H7.91859L15.0586 35.39L23.8086 1.09H30.3186L39.1386 35.53L46.3486 1.09H50.6886ZM82.812 40.43V44H57.822V1.09H81.552V4.66H64.962V20.27H80.082V23.98H64.962V40.43H82.812ZM127.548 21.74C130.394 22.5333 132.471 23.91 133.778 25.87C135.084 27.83 135.738 30.0467 135.738 32.52C135.738 35.8333 134.711 38.5867 132.658 40.78C130.604 42.9267 127.104 44 122.158 44H107.178V1.09H120.128C124.981 1.09 128.458 2.09333 130.558 4.1C132.704 6.10666 133.778 8.76667 133.778 12.08C133.778 14.2267 133.288 16.1633 132.308 17.89C131.374 19.57 129.788 20.8533 127.548 21.74ZM114.318 20.69H119.638C122.158 20.69 123.954 19.92 125.028 18.38C126.101 16.7933 126.638 14.7167 126.638 12.15C126.638 9.39667 126.054 7.32 124.888 5.92C123.721 4.47333 121.971 3.75 119.638 3.75H114.318V20.69ZM121.458 41.34C126.218 41.34 128.598 38.4 128.598 32.52C128.598 29.9533 127.991 27.7833 126.778 26.01C125.564 24.2367 123.791 23.35 121.458 23.35H114.318V41.34H121.458ZM168.808 40.43V44H143.818V1.09H167.548V4.66H150.958V20.27H166.078V23.98H150.958V40.43H168.808ZM198.819 40.43V44H176.699V1.09H183.839V40.43H198.819ZM212.276 44H205.136V1.09H212.276V44ZM248.72 40.43V44H223.73V1.09H247.46V4.66H230.87V20.27H245.99V23.98H230.87V40.43H248.72ZM286.781 1.09L273.481 44H265.151L251.781 1.09H258.921L270.681 40.78L282.441 1.09H286.781ZM318.31 40.43V44H293.32V1.09H317.05V4.66H300.46V20.27H315.58V23.98H300.46V40.43H318.31ZM349.816 44H342.676V1.09H349.816V44ZM394.589 44H386.819L365.679 8.16V44H361.479V1.09H369.109L390.319 36.86V1.09H394.519V43.93L394.589 44ZM701.628 29.16L701.558 29.23V44H694.418V29.16L681.188 1.09H688.398L699.388 25.24L710.658 1.09H714.858L701.628 29.16ZM735.549 44.84C729.669 44.84 725.306 43.0433 722.459 39.45C719.659 35.81 718.259 30.1867 718.259 22.58C718.259 14.88 719.659 9.23333 722.459 5.64C725.259 2.04667 729.623 0.25 735.549 0.25C741.523 0.25 745.909 2.07 748.709 5.71C751.509 9.30333 752.909 14.9267 752.909 22.58C752.909 30.1867 751.486 35.81 748.639 39.45C745.839 43.0433 741.476 44.84 735.549 44.84ZM735.549 41.83C739.003 41.83 741.569 40.2667 743.249 37.14C744.929 33.9667 745.769 29.1133 745.769 22.58C745.769 15.9533 744.929 11.0767 743.249 7.95C741.569 4.77667 739.003 3.19 735.549 3.19C732.096 3.19 729.529 4.75333 727.849 7.88C726.216 11.0067 725.399 15.9067 725.399 22.58C725.399 29.2067 726.216 34.0833 727.849 37.21C729.529 40.29 732.096 41.83 735.549 41.83ZM792.924 29.79C792.924 33.3833 792.154 36.3233 790.614 38.61C789.12 40.85 787.207 42.46 784.874 43.44C782.587 44.3733 780.16 44.84 777.594 44.84C772.974 44.84 769.124 43.6967 766.044 41.41C763.01 39.0767 761.494 35.2033 761.494 29.79V1.09H768.634V29.79C768.634 33.8033 769.474 36.7433 771.154 38.61C772.88 40.43 775.19 41.34 778.084 41.34C781.07 41.34 783.59 40.4067 785.644 38.54C787.744 36.6267 788.794 33.71 788.794 29.79V1.09H792.924V29.79ZM803.766 36.3C804.839 36.3 805.726 36.72 806.426 37.56C807.173 38.3533 807.546 39.4033 807.546 40.71C807.546 43.09 806.846 45.2133 805.446 47.08C804.093 48.9467 802.483 50.44 800.616 51.56L799.356 49.95C800.056 49.2967 800.546 48.62 800.826 47.92C801.106 47.22 801.246 46.3333 801.246 45.26C801.246 44.6533 801.036 43.8367 800.616 42.81C800.196 41.55 799.986 40.64 799.986 40.08C799.986 39.0533 800.359 38.1667 801.106 37.42C801.853 36.6733 802.739 36.3 803.766 36.3Z" fill="white" fillOpacity="0.85"/>
            <path d="M434.839 0.25C439.226 0.25 442.609 1.3 444.989 3.4C447.369 5.45333 448.839 8.62667 449.399 12.92L443.589 13.69C443.356 10.33 442.469 7.74 440.929 5.92C439.436 4.1 437.406 3.19 434.839 3.19C432.086 3.19 429.963 3.86667 428.469 5.22C427.023 6.52667 426.299 8.39333 426.299 10.82C426.299 13.06 426.883 14.7633 428.049 15.93C429.263 17.05 431.409 18.0067 434.489 18.8L438.339 19.78C442.493 20.9467 445.433 22.4867 447.159 24.4C448.886 26.3133 449.749 28.9733 449.749 32.38C449.749 36.3933 448.443 39.4733 445.829 41.62C443.216 43.7667 439.483 44.84 434.629 44.84C430.009 44.84 426.463 43.8133 423.989 41.76C421.563 39.66 420.093 36.4633 419.579 32.17L425.249 31.33C425.623 34.69 426.603 37.28 428.189 39.1C429.776 40.92 431.923 41.83 434.629 41.83C440.696 41.83 443.729 39.2633 443.729 34.13C443.729 32.59 443.473 31.3533 442.959 30.42C442.446 29.4867 441.583 28.7167 440.369 28.11C439.203 27.4567 437.476 26.85 435.189 26.29L431.619 25.38C427.466 24.3067 424.549 22.8133 422.869 20.9C421.236 18.94 420.419 16.1867 420.419 12.64C420.419 8.58 421.633 5.5 424.059 3.4C426.533 1.3 430.126 0.25 434.839 0.25ZM483.33 40.43V44H458.34V1.09H482.07V4.66H465.48V20.27H480.6V23.98H465.48V40.43H483.33ZM521.18 44H513.48L507.46 29.09C506.9 27.7367 506.2 26.85 505.36 26.43C504.567 25.9633 503.33 25.73 501.65 25.73H498.36V44H491.22V1.09H505.57C510.657 1.09 514.227 2.35 516.28 4.87C518.334 7.34333 519.36 10.3533 519.36 13.9C519.36 16.5133 518.73 18.8467 517.47 20.9C516.257 22.9067 514.134 24.3067 511.1 25.1C512.78 25.7067 513.994 26.8267 514.74 28.46L521.18 44ZM504.8 23.14C507.32 23.14 509.187 22.2533 510.4 20.48C511.614 18.66 512.22 16.4667 512.22 13.9C512.22 11.0533 511.614 8.65 510.4 6.69C509.187 4.73 507.32 3.75 504.8 3.75H498.36V23.14H504.8ZM559.945 1.09L546.645 44H538.315L524.945 1.09H532.085L543.845 40.78L555.605 1.09H559.945ZM573.624 44H566.484V1.09H573.624V44ZM618.398 44H610.628L589.488 8.16V44H585.288V1.09H592.918L614.128 36.86V1.09H618.328V43.93L618.398 44ZM659.813 44H656.243L654.773 38.75C652.393 42.81 648.847 44.84 644.133 44.84C639.84 44.84 636.48 43.9767 634.053 42.25C631.673 40.4767 630.017 37.98 629.083 34.76C628.15 31.54 627.683 27.48 627.683 22.58C627.683 17.5867 628.173 13.48 629.153 10.26C630.18 6.99333 631.93 4.52 634.403 2.84C636.923 1.11333 640.4 0.25 644.833 0.25C649.547 0.25 652.93 1.23 654.983 3.19C657.037 5.10333 658.297 7.95 658.763 11.73L653.023 12.78C652.463 6.38667 649.733 3.19 644.833 3.19C642.173 3.19 640.12 3.89 638.673 5.29C637.227 6.69 636.223 8.76667 635.663 11.52C635.103 14.2733 634.823 17.96 634.823 22.58C634.823 27.06 635.08 30.6767 635.593 33.43C636.107 36.1833 637.017 38.2833 638.323 39.73C639.677 41.13 641.613 41.83 644.133 41.83C650.247 41.83 653.42 37.63 653.653 29.23V25.66H645.813V22.16H659.813V44ZM856.347 1.09V4.66H845.007V44H837.867V4.66H826.387V1.09H856.347ZM893.362 1.09V44H886.152V24.33H869.142V44H862.002V1.09H869.142V20.76H886.152V1.09H893.362ZM929.785 40.43V44H904.795V1.09H928.525V4.66H911.935V20.27H927.055V23.98H911.935V40.43H929.785ZM974.52 21.74C977.367 22.5333 979.443 23.91 980.75 25.87C982.057 27.83 982.71 30.0467 982.71 32.52C982.71 35.8333 981.683 38.5867 979.63 40.78C977.577 42.9267 974.077 44 969.13 44H954.15V1.09H967.1C971.953 1.09 975.43 2.09333 977.53 4.1C979.677 6.10666 980.75 8.76667 980.75 12.08C980.75 14.2267 980.26 16.1633 979.28 17.89C978.347 19.57 976.76 20.8533 974.52 21.74ZM961.29 20.69H966.61C969.13 20.69 970.927 19.92 972 18.38C973.073 16.7933 973.61 14.7167 973.61 12.15C973.61 9.39667 973.027 7.32 971.86 5.92C970.693 4.47333 968.943 3.75 966.61 3.75H961.29V20.69ZM968.43 41.34C973.19 41.34 975.57 38.4 975.57 32.52C975.57 29.9533 974.963 27.7833 973.75 26.01C972.537 24.2367 970.763 23.35 968.43 23.35H961.29V41.34H968.43ZM1015.78 40.43V44H990.791V1.09H1014.52V4.66H997.931V20.27H1013.05V23.98H997.931V40.43H1015.78ZM1035.99 0.25C1040.38 0.25 1043.76 1.3 1046.14 3.4C1048.52 5.45333 1049.99 8.62667 1050.55 12.92L1044.74 13.69C1044.51 10.33 1043.62 7.74 1042.08 5.92C1040.59 4.1 1038.56 3.19 1035.99 3.19C1033.24 3.19 1031.11 3.86667 1029.62 5.22C1028.17 6.52667 1027.45 8.39333 1027.45 10.82C1027.45 13.06 1028.03 14.7633 1029.2 15.93C1030.41 17.05 1032.56 18.0067 1035.64 18.8L1039.49 19.78C1043.64 20.9467 1046.58 22.4867 1048.31 24.4C1050.04 26.3133 1050.9 28.9733 1050.9 32.38C1050.9 36.3933 1049.59 39.4733 1046.98 41.62C1044.37 43.7667 1040.63 44.84 1035.78 44.84C1031.16 44.84 1027.61 43.8133 1025.14 41.76C1022.71 39.66 1021.24 36.4633 1020.73 32.17L1026.4 31.33C1026.77 34.69 1027.75 37.28 1029.34 39.1C1030.93 40.92 1033.07 41.83 1035.78 41.83C1041.85 41.83 1044.88 39.2633 1044.88 34.13C1044.88 32.59 1044.62 31.3533 1044.11 30.42C1043.6 29.4867 1042.73 28.7167 1041.52 28.11C1040.35 27.4567 1038.63 26.85 1036.34 26.29L1032.77 25.38C1028.62 24.3067 1025.7 22.8133 1024.02 20.9C1022.39 18.94 1021.57 16.1867 1021.57 12.64C1021.57 8.58 1022.78 5.5 1025.21 3.4C1027.68 1.3 1031.28 0.25 1035.99 0.25ZM1083.64 1.09V4.66H1072.3V44H1065.16V4.66H1053.68V1.09H1083.64ZM1085.48 44.49C1084.4 44.49 1083.47 44.07 1082.68 43.23C1081.88 42.39 1081.49 41.4333 1081.49 40.36C1081.49 39.24 1081.88 38.2833 1082.68 37.49C1083.47 36.6967 1084.4 36.3 1085.48 36.3C1086.64 36.3 1087.62 36.6967 1088.42 37.49C1089.21 38.2833 1089.61 39.24 1089.61 40.36C1089.61 41.48 1089.21 42.46 1088.42 43.3C1087.62 44.0933 1086.64 44.49 1085.48 44.49Z" fill="#33383D" fillOpacity="0.85"/>
        </svg>
        <h1 className={`${arya.className} text-3xl md:hidden`} >OUR SERVICES</h1>
    </div>
    <div {...handlers} className="flex items-center justify-center w-full relative">
    <SlArrowLeftCircle onClick={prevItem} className="hidden md:block text-4xl text-[#33383D] mr-10 cursor-pointer" />
    <div className="flex items-center justify-center relative overflow-hidden" style={{ width: `${isMobile ? '100vw' : '53vw'}`, height: `${isMobile ? '50vw' : '30vw'}` }}>
        {items.map((item, index) => (
        <div
            key={index}
            className={`w-[40vw] md:w-[15vw] ${index === currentIndex ? 'h-[50vw] md:h-[20vw]' : 'h-[30vw] md:h-[15vw]'} absolute transition-all duration-500 ease-in-out transform ${getClassName(index)} cursor-pointer text-sm md:text-2xl`}
            style={{
            backgroundColor: index === currentIndex ? '#33383D' : 'rgba(188,161,132,1)',
            color: index === currentIndex ? 'rgba(188,161,132,1)' : '#33383D',
            border: '2px solid #33383D',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            left: `calc(50% + (${index - currentIndex} * ${isMobile ? '(40vw + 7vw)' : '(15vw + 4vw)'}))`,
            transform: 'translateX(-50%)'
            }}
            onClick={index + 1 ? nextItem : prevItem}
        >
            {item.text}
        </div>
        ))}
    </div>
    <SlArrowRightCircle onClick={nextItem} className="hidden md:block text-4xl text-[#33383D] ml-10 cursor-pointer" />
    </div>
</div>
    )
}